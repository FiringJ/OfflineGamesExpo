# 离线游戏项目架构

## 项目概览

离线游戏集合是一个基于React Native和Expo开发的移动应用程序，提供多种经典游戏供用户在没有网络连接的情况下娱乐。项目采用TypeScript开发，确保代码类型安全和更好的开发体验。

## 技术栈

- **框架**: React Native + Expo
- **语言**: TypeScript
- **状态管理**: React Context API
- **路由导航**: Expo Router
- **UI组件**: React Native Paper
- **音频处理**: Expo AV

## 项目结构

```
OfflineGamesExpo/
├── app/                   # 应用路由和页面
│   ├── (tabs)/            # 底部标签页
│   │   ├── index.tsx      # 主页
│   │   ├── explore.tsx    # 探索页面
│   │   └── settings.tsx   # 设置页面
│   ├── games/             # 游戏页面
│   │   └── index.tsx      # 游戏容器页面
│   └── _layout.tsx        # 应用布局
├── assets/                # 静态资源
│   ├── images/            # 图片资源
│   └── sounds/            # 音效资源
├── src/                   # 源代码
│   ├── components/        # 共享组件
│   ├── context/           # React Context提供器
│   │   └── GameContext.tsx # 游戏上下文
│   ├── games/             # 游戏逻辑实现
│   │   ├── 2048/          # 2048游戏
│   │   ├── tetris/        # 俄罗斯方块
│   │   ├── snake/         # 贪吃蛇
│   │   └── minesweeper/   # 扫雷
│   ├── hooks/             # 自定义钩子
│   ├── utils/             # 工具函数
│   │   └── theme.ts       # 主题配置
│   └── types/             # 类型定义
└── docs/                  # 项目文档
```

## 核心模块

### 1. 路由系统

使用Expo Router实现了基于文件系统的路由导航，包括：
- 底部标签导航
- 游戏页面导航
- 参数传递（游戏ID等）

### 2. 游戏状态管理

通过GameContext实现游戏状态管理：
- 游戏分数记录
- 游戏游玩次数统计
- 状态在应用重启后持久化

### 3. 游戏引擎架构

每个游戏采用相似的架构模式：
- 状态管理（游戏板、玩家状态、分数等）
- 用户输入处理（触摸、手势）
- 游戏循环实现
- 音效处理
- UI渲染

### 4. 音频系统

使用Expo AV实现多种音效支持：
- 背景音乐
- 游戏音效（移动、消除、胜利、失败等）
- 音效切换控制

### 5. 主题系统

实现了一套统一的主题系统：
- 应用基础主题
- 各游戏特定主题颜色
- 支持亮/暗模式

## 设计模式

1. **组件化设计**: 所有UI元素都被分解为可重用组件
2. **上下文模式**: 使用React Context API实现状态共享
3. **自定义钩子**: 抽象通用逻辑为可重用钩子
4. **状态机模式**: 游戏状态管理采用状态机思想
5. **响应式设计**: 界面适应不同屏幕尺寸

## 扩展性考虑

项目架构设计考虑了扩展性：
1. 新游戏可以轻松添加到现有架构中
2. 核心游戏逻辑与UI渲染分离
3. 统一的主题和音效系统便于整合
4. 模块化设计使功能扩展简单直接 